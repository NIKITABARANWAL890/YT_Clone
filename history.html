<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.css" integrity="sha512-kJlvECunwXftkPwyvHbclArO8wszgBGisiLeuDFwNM8ws+wKIw0sv1os3ClWZOcrEB2eRXULYUsm8OVRGJKwGA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="history.css">
</head>
<body>
    <header>
        <div class="logo">
            <i class="fa-solid fa-bars"></i>
            <img src="images/logo.png" alt="Youtube Logo" id="yt_logo">
        </div>
        <div class="nav-search-bar">
            <div class="navSearch">
                <input type="text" name="search-text" id="searchBox" placeholder="Search" autocomplete="off">
                <div id="cross-search"><i class="fa-solid fa-xmark"></i></div>
                <button id="search-button"><i class="fa-solid fa-magnifying-glass"></i></button>
                <div id="search-history">
                </div>
                </div>
        <div class="search-mic">
        <i class="fa-solid fa-microphone"></i>
        </div>
        </div>
        <div class="nav-side">
            <div class="nav-create">
                <i class="fa-solid fa-plus"></i>
                <button>Create</button>
            </div>
            <i class="fa-solid fa-bell"></i>
            <div class="user-profile">
                N
            </div>
            <ul class="user-sidebar">
                <li class="first-div">
                    <div class="user-details">
                    <div class="user-profile">
                        N
                    </div>
                    <p style="font-size: 1.25rem;">Nikita Baranwal</p>
                    </div>
                    <a href="" style="align-self: center;">View your channel</a>
                </li>
        
                <li class="second-div">
                    <a href="#"><i class="ri-google-fill"></i>Google Account</a>
                    <a href="#"><i class="ri-account-box-line"></i>Switch Account</a>
                    <a href="#"><i class="ri-login-box-line"></i>Log out</a>
                </li>
        
                <li class="third-div">
                    <a href="#"><i class="ri-youtube-line"></i>YouTube Studio</a>
                    <a href="#"><i class="ri-money-dollar-circle-line"></i>Purchase and Membership</a>
                </li>
                <li class="four-div">
                    <a href="#"><i class="ri-shield-user-line"></i>Your data in YouTube</a>
                    <a href="#"><i class="ri-moon-line"></i>Appearance: Device theme</a>
                    <a href="#"><i class="ri-global-line"></i>Language: British English</a>
                    <a href="#"><i class="ri-global-line"></i>Location: India</a>
                </li>
                <li class="five-div">
                    <a href="#"><i class="ri-settings-4-line"></i>Settings</a>
                    <a href="#"><i class="ri-question-line"></i>Help</a>
                    <a href="#"><i class="ri-feedback-line"></i>Feedback</a>
                </li>
            </ul>
        </div>
    </header>

    <aside style="padding:1rem;">
        <ul class="first-div">
            <li><a href="index.html" class="nav-link home"><i class="fa-solid fa-house"></i>Home</a></li>
            <li><a href="#" class="nav-link shorts"><img src="images/shorts.png" alt="">Shorts</a></li>
            <li><a href="#" class="nav-link subscription"><i class="ri-tv-2-line"></i>Subscription</a></li>
        </ul>
    
        <ul class="second-div">
            <li><a href="#" class="nav-link you">You <i class="fa-solid fa-angle-right"></i></a></li>
            <li><a href="history.html" class="nav-link history"><i class="ri-history-line"></i>History</a></li>
            <li><a href="#" class="nav-link playlists"><i class="ri-play-list-line"></i>Playlists</a></li>
            <li><a href="#" class="nav-link yourVideos"><i class="ri-movie-line"></i>Your Videos</a></li>
            <li><a href="#" class="nav-link watchLater"><i class="ri-time-line"></i>Watch Later</a></li>
            <li><a href="#" class="nav-link likedVideos"><i class="ri-thumb-up-line"></i>Liked Videos</a></li>
            <li><a href="#" class="nav-link downloads"><i class="ri-download-line"></i>Downloads</a></li>
        </ul>
    
        <ul class="third-div">
            <li><h4>Subscription</h4></li>
        </ul>
    
        <ul class="four-div">
            <li><h4>Explore</h4></li>
            <li><a href="#"><i class="ri-fire-line"></i>Trending</a></li>
            <li><a href="#"><i class="ri-shopping-bag-4-line"></i>Shopping</a></li>
            <li><a href="#"><i class="ri-music-ai-line"></i>Music</a></li>
            <li><a href="#"><i class="ri-film-line"></i>Films</a></li>
            <li><a href="#"><i class="ri-rfid-line"></i>Live</a></li>
            <li><a href="#"><i class="ri-discord-line"></i>Gaming</a></li>
            <li><a href="#"><i class="ri-news-line"></i>News</a></li>
            <li><a href="#"><i class="fa-solid fa-trophy"></i>Sport</a></li>
            <li><a href="#"><i class="ri-graduation-cap-line"></i>Courses</a></li>
            <li><a href="#"><i class="ri-handbag-line"></i>Fashion</a></li>
            <li><a href="#"><i class="ri-router-line"></i>Podcasts</a></li>
        </ul>
    
        <ul class="five-div">
            <li><h4>More from YouTube</h4></li>
            <li><a href="#"><img src="images/ytPremium.png" alt="">YouTube Premium</a></li>
            <li><a href="#"><img src="images/ytStudio.png" alt="">YouTube Studio</a></li>
            <li><a href="#"><img src="images/music.png" alt="">YouTube Music</a></li>
            <li><a href="#"><img src="images/ytKids.png" alt="">YouTube Kids</a></li>
        </ul>
    </aside>

    <div class="main-content">
    <h1>Watch History</h1>
    <div class="history-container">
        <div class="history-content">
            <h2>Today</h2>
            <div class="history-content-header">
                <h3><img src="images/yt_shorts_history.png" alt="">Shorts</h3>
                <i class="fa-solid fa-ellipsis-vertical"></i>
            </div>
        <!-- <a href="index.html">HOME</a> -->
        <div id="iframe-container"></div>
        </div>
        <div class="search-history">
            <div class="search-bar">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" placeholder="Search watch history">
            </div>
                <p class="manage-history" id="clear-all-history"><i class="fa-solid fa-trash"></i>Clear all watch history
                <div class="clear-history-pop">
                    <p>Clear Watch History?</p>
                    <p>User Name(e-mail)</p>
                    <p>Your YouTube watch history will be cleared from all YouTube apps on all devices</p>
                    <p>Your video recommendations will be reset, but may still be influenced by activity on other Google products. To learn more, visit <a href="">My Activity</a>.</p>
                    <div class="clear-history-btns">
                        <button id="cancel-history-btn">Cancel</button>
                        <button id="clear-history-btn">Clear Watch History</button>
                    </div>
                </div></p>
                <p class="manage-history" id="pause-all-history"><i class="fa-solid fa-pause"></i>Pause watch history
                    <div class="pause-history-pop">
                        <p>Pause Watch History?</p>
                        <p>User Name(e-mail)</p>
                        <p>
                            Pausing YouTube Watch History can make it harder to find videos that you have watched and you may see fewer recommendations for new videos in YouTube and other Google products.</p>
                        <p>
                            Remember, pausing this setting doesn't delete any previous activity but you can view, edit and delete your private <a href="">YouTube Watch History</a> data at any time. When you pause and clear your watch history, YouTube features that rely on history to personalise your experience are disabled.</p>
                        <div class="clear-history-btns">
                            <button id="cancel-pause-btn">Cancel</button>
                            <button id="clear-pause-btn">Pause Watch History</button>
                        </div>
                    </div></p>
                <p class="manage-history" id="manage-all-history"><i class="fa-solid fa-gear"></i>Manage all history</p>
                <p>Comments</p>
                <p>Posts</p>
                <p>Live Chat</p>
        </div>
    </div>
    </div>

    <script>


const historyText = localStorage.getItem("yt_history") || "[]";
let historyArray = JSON.parse(historyText).reverse();

const root1 = document.getElementById('iframe-container');

function renderVideos() {
    root1.innerHTML = ""; // Clear existing content

    historyArray.forEach((video, index) => {
        console.log(video);
        const newCard = document.createElement('div');
        newCard.innerHTML = `
            <div class="history-cards">
                <iframe 
                    width="448" 
                    height="252" 
                    src="https://www.youtube.com/embed/${video.videoId}" 
                    title="YouTube video player" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                    referrerpolicy="strict-origin-when-cross-origin" 
                    allowfullscreen >
                </iframe>
                <div class="history-cards-content">
                    <div class="history-cards-header">
                        <p id="history-cards-header-title">${video.title}</p>
                        <button onclick="deleteVideo(${index})" id='delete-btn'>
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>
                    <p>${video.author}</p>
                </div>
            </div>
        `;
        root1.appendChild(newCard);
    });
}

function deleteVideo(index) {
    historyArray.splice(index, 1);
    localStorage.setItem("yt_history", JSON.stringify(historyArray.reverse())); // Update localStorage
    renderVideos(); // Re-render list
}

const clearAllHistoryBtn = document.querySelector('#clear-all-history');
clearAllHistoryBtn.addEventListener("click", ()=>{
    document.querySelector('.clear-history-pop').style.display='block';
});

const pauseAllHistoryBtn = document.querySelector('#pause-all-history');
pauseAllHistoryBtn.addEventListener("click", ()=>{
    document.querySelector('.pause-history-pop').style.display='block';
});

const cancelAllHistoryBtn = document.querySelector('#cancel-history-btn');
cancelAllHistoryBtn.addEventListener("click", ()=>{
    document.querySelector('.clear-history-pop').style.display='none';
});

const cancelAllPauseBtn = document.querySelector('#cancel-pause-btn');
cancelAllPauseBtn.addEventListener("click", ()=>{
    document.querySelector('.pause-history-pop').style.display='none';
});


const clearWatchHistoryBtn = document.querySelector('#clear-history-btn');
clearWatchHistoryBtn.addEventListener("click", () => {
    document.querySelector('.clear-history-pop').style.display = 'none';
    localStorage.removeItem('yt_history');
    const historyContainer = document.querySelector('.history-container'); 
    if (historyContainer) {
        historyContainer.innerHTML = "";
    }
    historyContainer.innerHTML = `<p style="text-align:center">This list has no videos.</p>`;
    // location.reload();
});


renderVideos(); // Initial render

    </script>
    <script src="script.js"></script>
</body>
</html>
